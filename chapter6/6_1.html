<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>6.1 Основные сведения</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
	<pre>    Давайте снова обратимся к процедурам преобразования даты
из главы 5. Дата состоит из нескольких частей таких, как
день, месяц, и год, и, возможно, день года и имя месяца. Эти
пять переменных можно объединить в одну структуру вида:

 struct date {
   int  day;
   int  month;
   int  year;
   int  yearday;
   char mon_name[4];
 };

    Описание структуры, состоящее из заключенного в фигурные
скобки списка описаний, начинается с ключевого слова struct.
За словом struct может следовать необязательное имя, называ-
емое ярлыком структуры (здесь это datе). Такой ярлык именует
структуры этого вида и может использоваться в дальнейшем как
сокращенная запись подробного описания.
    Элементы или переменные, упомянутые в структуре, называ-
ются членами. Ярлыки и члены структур могут иметь такие же
имена, что и обычные переменные (т.е. не являющиеся членами
структур), поскольку их имена всегда можно различить по кон-
тексту. Конечно, обычно одинаковые имена присваивают только
тесно связанным объектам.
    Точно так же, как в случае любого другого базисного ти-
па, за правой фигурной скобкой, закрывающей список членов,
может следовать список переменных.
Оператор

   struct   { ...} x,y,z;

синтаксически аналогичен

   int x,y,z;

в том смысле, что каждый из операторов описывает x, y и z в
качестве переменных соотвествующих типов и приводит к выде-
лению для них памяти.
    Описание структуры, за которым не следует списка пере-
менных, не приводит к выделению какой-либо памяти; оно толь-
ко определяет шаблон или форму структуры. Однако, если такое
описание снабжено ярлыком, то этот ярлык может быть исполь-
зован позднее при определении фактических экземпляров струк-
тур. Например, если дано приведенное выше описание date, то

   struct  date d;

определяет переменную d в качестве структуры типа date.
Внешнюю или статическую структуру можно инициализировать,
поместив вслед за ее определением список инициализаторов для
ее компонент:

 struct date d={ 4, 7, 1776, 186, &quot;jul&quot;};

    Член определенной структуры может быть указан в выраже-
нии с помощью конструкции вида

  имя структуры . Член
  --------------------
Операция указания члена структуры &quot;.&quot; связывает имя структу-
ры и имя члена. В качестве примера определим leap (признак
високосности года) на основе даты, находящейся в структуре
d,

leap = d.year % 4 == 0 &amp;&amp; d.year % 100 != 0 || d.year % 400 == 0;

или проверим имя месяца

 if (strcmp(d.mon_name, &quot;aug&quot;) == 0) ...

Или преобразуем первый символ имени месяца так, чтобы оно
начиналось со строчной буквы

 d.mon_name[0] = lower(d.mon_name[0]);

    Структуры могут быть вложенными; учетная карточка служа-
щего может фактически выглядеть так:

 struct  person  {
   char name[namesize];
   char address[adrsize];
   long zipcode;   /* почтовый индекс */
   long ss_number; /* код соц. обеспечения */
   double salary;  /* зарплата */
   struct date birthdate; /* дата рождения */
   struct date hiredate; /* дата поступления на работу */
 };

Структура person содержит две структуры типа date. Если мы
определим emp как

 struct person emp;

то

 emp.birthdate.month

будет ссылаться на месяц рождения. Операция указания члена
структуры &quot;.&quot; ассоциируется слева направо.
</pre>
	<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>
