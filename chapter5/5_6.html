<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>5.6 ”казатели - не целые</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
	<pre>    ¬ы, возможно, обратили внимание в предыдущих C-прог-
раммах на довольно непринужденное отношение к копированию
указателей. ¬ общем это верно, что на большинстве машин ука-
затель можно присвоить целому и передать его обратно, не из-
менив его; при этом не происходит никакого масштабировани€
или преобразовани€ и ни один бит не тер€етс€.   сожалению,
это ведет к вольному обращению с функци€ми, возвращающими
указатели, которые затем просто передаютс€ другим функци€м,
- необходимые описани€ указателей часто опускаютс€. –ассмот-
рим, например, функцию strsave(s), котора€ копирует строку s
в некоторое место дл€ хранени€, выдел€емое посредством обра-
щени€ к функции alloc, и возвращает указатель на это место.
ѕравильно она должна быть записана так:

 char *strsave(s) /* save string s somewhere */
 char *s;
 {
   char *p, *alloc();
   if ((p = alloc(strlen(s)+1)) != NULL)
     strcpy(p, s);
   return(p);
 }

на практике существует сильное стремление опускать описани€:

 *strsave(s) /* save string s somewhere */
 {
   char *p;
   if ((p = alloc(strlen(s)+1)) != NULL)
     strcpy(p, s);
   return(p);
 }

    Ёта программа будет правильно работать на многих маши-
нах, потому что по умолчанию функции и аргументы имеют тип
int, а указатель и целое обычно можно безопасно пересылать
туда и обратно. ќднако такой стиль программировани€ в своем
существе €вл€етс€ рискованным, поскольку зависит от деталей
реализации и архитектуры машины и может привести к непра-
вильным результатам на конкретном используемом вами компил€-
торе. –азумнее всюду использовать полные описани€. (ќтладоч-
на€ программа LINT предупредит о таких конструкци€х, если
они по неосторожности все же по€в€тс€).</pre>
	<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>
