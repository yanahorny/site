<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>2.8 Операции увеличения и уменьшения</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
		<p>В языке C предусмотрены две необычные операции для увеличения и уменьшения значений переменных. Операция увеличения ++ добавляет 1 к своему операнду, а операция уменьшения -- вычитает 1. Мы часто использовали операцию ++ для увеличения переменных, как, например, в</p>
		<blockquote>
			<pre>if(c == '\n')
  ++i;</pre>
		</blockquote>
		<p>Необычный аспект заключается в том, что ++ и -- можно использовать либо как префиксные операции (перед переменной, как в ++n), либо как постфиксные (после переменной: n++). Эффект в обоих случаях состоит в увеличении n. Но выражение ++n увеличивает переменную n до использования ее значения, в то время как n++ увеличивает переменную n после того, как ее значение было использовано. Это означает, что в контексте, где используется значение переменной, а не только эффект увеличения, использование ++n и n++ приводит к разным результатам. Если n = 5, то</p>
		<blockquote>
			<pre>х = n++;</pre>
		</blockquote>
		<p>устанавливает х равным 5, а</p>
		<blockquote>
			<pre>х = ++n;</pre>
		</blockquote>
		<p>полагает х равным 6. В обоих случаях n становится равным 6. Операции увеличения и уменьшения можно применять только к переменным; выражения типа х=(i+j)++ являются незаконными.</p>
		<p>В случаях, где нужен только эффект увеличения, а само значение не используется, как, например, в</p>
		<blockquote>
			<pre>if ( c == '\n' )
  nl++;</pre>
		</blockquote>
		<p>выбор префиксной или постфиксной операции является делом вкуса. Но встречаются ситуации, где нужно использовать именно ту или другую операцию. Рассмотрим, например, функцию squeeze(s,c), которая удаляет символ 'с' из строки s, каждый раз, как он встречается.</p>
		<blockquote>
			<pre class="cpp">squeeze(s,c)    <span class="comment">/* delete all c from s */</span>
char s[];
int c;
{
  int i, j;
  for ( i = j = 0; s[i] != '\0'; i++)
    if ( s[i] != 'c' )
      s[j++] = s[i];
  s[j] = '\0';
}</pre>
		</blockquote>
		<p>Каждый раз, как встречается символ, отличный от 'с', он копируется в текущую позицию j, и только после этого j увеличивается на 1, чтобы быть готовым для поступления следующего символа. Это в точности эквивалентно записи</p>
		<blockquote>
			<pre>if ( s[i] != 'c' ) {
  s[j] = s[i];
  j++;
}</pre>
		</blockquote>
		<p>Другой пример подобной конструкции дает функция getline, которую мы запрограммировали в <a href="../chapter1/1.html">главе&nbsp;1</a>, где можно заменить</p>
		<blockquote>
			<pre>if ( c == '\n' )  {
  s[i] = c;
  ++i;
}</pre>
		</blockquote>
		<p>более компактной записью</p>
		<blockquote>
			<pre>if ( c == '\n' )
  s[i++] = c;</pre>
		</blockquote>
		<p>В качестве третьего примера рассмотрим функцию strcat(s,t), которая приписывает строку t в конец строки s, образуя конкатенацию строк s и t. При этом предполагается, что в s достаточно места для хранения полученной комбинации.</p>
		<blockquote>
			<pre class="cpp">strcat(s,t)     <span class="comment">/* concatenate t to end of s */</span>
char s[], t[];  /* s must be big enough */
{
  int i, j;
  i = j = 0;
  while (s[i] != '\0') / *find end of s */
    i++;
  while((s[i++] = t[j++]) != '\0') /*copy t*/
  ;
}</pre>
		</blockquote>
		<p>Tак как из t в s копируется каждый символ, то для подготовки к следующему прохождению цикла постфиксная операция ++ применяется к обеим переменным i и j.</p>
		<div class="exercise">
			<p><span class="exercisetitle">Упражнение 2-3</span></p>
			<p>Напишите другой вариант функции squeeze(s1,s2), который удаляет из строки s1 каждый символ, совпадающий с каким-либо символом строки s2.</p>
			<p><span class="exercisetitle">Упражнение 2-4</span></p>
			<p>Напишите программу для функции any(s1,s2), которая находит место первого появления в строке s1 какого-либо символа из строки s2 и, если строка s1 не содержит символов строки s2, возвращает значение -1.</p>
		</div>
		<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>