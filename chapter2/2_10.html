<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>2.10 Операции и выражения присваивания</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
<p>Такие выражения, как</p>

<blockquote>
			<pre>i = i + 2</pre>
		</blockquote>

<p>в которых левая часть повторяется в правой части могут быть записаны в сжатой форме</p>

<blockquote>
			<pre>i += 2</pre>
		</blockquote>

<p>используя операцию присваивания вида +=.</p>
<p>Большинству бинарных операций (операций подобных +, которые имеют левый и правый операнд) соответствует операция присваивания вида оп=, где оп - одна из операций</p>

<blockquote><pre>+  -  *  /  %  &lt;&lt;  >>  &amp;  ~  |</pre></blockquote>

<p>Если е1 и е2 - выражения, то</p>

<blockquote>
			<pre>е1 оп= е2</pre>
		</blockquote>

<p>эквивалентно</p>

<blockquote>
			<pre>е1 = (е1) оп (е2)</pre>
		</blockquote>

<p>за исключением того, что выражение е1 вычисляется только один раз. Обратите внимание на круглые скобки вокруг е2:</p>

<blockquote>
			<pre>x *= y + 1</pre>
		</blockquote>

<p>то</p>

<blockquote>
			<pre>x = x * (y + 1)</pre>
		</blockquote>

<p>не</p>

<blockquote>
			<pre>x = x * y + 1</pre>
		</blockquote>
		<p>В качестве примера приведем функцию bitcount, которая подсчитывает число равных 1 битов у целого аргумента.</p>
		<blockquote>
			<pre class="cpp">bitcount(n)   /* count 1 bits in n */
unsigned n;
{
  int b;
  for (b = 0; n != 0; n >>= 1)
    if (n &amp; 01)
      b++;
  return(b);
}</pre>
		</blockquote>
		<p>Не говоря уже о краткости, такие операторы присваивания имеют то преимущество, что они лучше соответствуют образу человеческого мышления. Мы говорим: "прибавить 2 к i" или "увеличить i на 2", но не "взять i, прибавить 2 и поместить результат опять в i". Итак, i += 2. Кроме того, в громоздких выражениях, подобных</p>
		<blockquote>
			<pre>yyval[yypv[p3+p4] + yypv[p1+p2]] += 2</pre>
		</blockquote>

<p>Такая операция присваивания облегчает понимание программы, так как читатель не должен скрупулезно проверять, являются ли два длинных выражения действительно одинаковыми, или задумываться, почему они не совпадают. Такая операция присваивания может даже помочь компилятору получить более эффективную программу.</p>
<p>Мы уже использовали тот факт, что операция присваивания имеет некоторое значение и может входить в выражения; самый типичный пример</p>

<blockquote>
			<pre>while ((c = getchar()) != EOF)</pre>
		</blockquote>

<p>Присваивания, использующие другие операции присваивания (+=, -= и т.д.) также могут входить в выражения, хотя это случается реже.</p>
		<p>Типом выражения присваивания является тип его левого операнда.</p>
		<div class="exercise">
			<p><span class="exercisetitle">Упражнение 2-9</span></p>
			<p>В двоичной системе счисления операция x&amp;(x-1) обнуляет самый правый равный 1 бит переменной x (почему?). Используйте это замечание для написания более быстрой версии функции bitcount.</p>
		</div>
		<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>