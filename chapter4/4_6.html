<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>4.6 Статические переменные</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
	<pre>    Статические переменные представляют собой третий класс
памяти, в дополнении к автоматическим переменным и extern, с
которыми мы уже встречались.
    Статические переменные могут быть либо внутренними, либо
внешними. Внутренние статические переменные точно так же,
как и автоматические, являются локальными для некоторой фун-
кции, но, в отличие от автоматических, они остаются сущест-
вовать, а не появляются и исчезают вместе с обращением к
этой функции. Это означает, что внутренние статические пере-
менные обеспечивают постоянное, недоступное извне хранение
внутри функции. Символьные строки, появляющиеся внутри функ-
ции, как, например, аргументы printf, являются внутренними
статическими.
    Внешние статические переменные определены в остальной
части того исходного файла, в котором они описаны, но не в
каком-либо другом файле. Таким образом, они дают способ
скрывать имена, подобные buf и bufp в комбинации
getch-ungetch, которые в силу их совместного использования
должны быть внешними, но все же не доступными для пользова-
телей getch и ungetch, чтобы исключалась возможность конф-
ликта. Если эти две функции и две переменные объеденить в
одном файле следующим образом

static char buf[BUFSIZE]; /* buffer for ungetch */
static int bufp=0; /*next free position in buf */

getch()  {...}

ungetch()  {...}

то никакая другая функция не будет в состоянии обратиться к
buf и bufp; фактически, они не будут вступать в конфликт с
такими же именами из других файлов той же самой программы.
    Статическая память, как внутренняя, так и внешняя, спе-
цифицируется словом static , стоящим перед обычным описани-
ем. Переменная является внешней, если она описана вне какой
бы то ни было функции, и внутренней, если она описана внутри
некоторой функции.
    Нормально функции являются внешними объектами; их имена
известны глобально. Возможно, однако, объявить функцию как
static; тогда ее имя становится неизвестным вне файла, в
котором оно описано.
    В языке C "static" отражает не только постоянство, но
и степень того, что можно назвать "приватностью". Внутренние
статические объекты определены только внутри одной функции;
внешние статические объекты (переменные или функции) опреде-
лены только внутри того исходного файла, где они появляются,
и их имена не вступают в конфликт с такими же именами пере-
менных и функций из других файлов.
    Внешние статические переменные и функции предоставляют
способ организовывать данные и работающие с ними внутренние
процедуры таким образом, что другие процедуры и данные не
могут прийти с ними в конфликт даже по недоразумению. Напри-
мер, функции getch и ungetch образуют "модуль" для ввода и
возвращения символов; buf и bufp должны быть статическими,
чтобы они не были доступны извне. Точно так же функции push,
pop и clear формируют модуль обработки стека; var и sp тоже
должны быть внешними статическими.</pre>
	<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>
