<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>1.7 Функции</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
<p>В языке C функции эквивалентны подпрограммам или функциям в Фортране или процедурам в PL/1, Паскале и т.д. Функции дают удобный способ заключения некоторой части вычислений в "черный ящик", который в дальнейшем можно использовать, не интересуясь его внутренним содержанием. Использование функций является фактически единственным способом справиться с потенциальной сложностью больших программ. Если функции организованы должным образом, то можно игнорировать то, как делается работа; достаточно знание того, что делается. Язык C разработан таким образом, чтобы сделать использование функций легким, удобным и эффективным. Вам будут часто встречаться функции длиной всего в несколько строчек, вызываемые только один раз, и они используются только потому, что это проясняет некоторую часть программы.</p>
<p>До сих пор мы использовали только предоставленные нам функции типа printf, getchar и putchar; теперь пора написать несколько наших собственных. Так как в C нет операции возведения в степень, подобной операции ** в Фортране или PL/1, давайте проиллюстрируем механику определения функции на примере функции power(m,n), возводящей целое m в целую положительную степень n. Так значение power(2,5) равно 32. Конечно, эта функция не выполняет всей работы операции **, поскольку она действует только с положительными степенями небольших чисел, но лучше не создавать дополнительных затруднений, смешивая несколько различных вопросов.</p>
		<p>Ниже приводится функция power и использующая ее основная программа, так что вы можете видеть целиком всю структуру.</p>
		<blockquote>
			<pre class="cpp">main()  <span class="comment">/* test power function */</span>
{
  int i;
  for(i = 0; i &lt; 10; ++i)
  printf(&quot;%d %d %d\n&quot;, i, power(2,i), power(-3,i));
}

power(x,n)  /* raise x n-th power; n &gt; 0  */
int x,n;
{
  int i, p;
  p = 1;
  for (i = 1; i &lt;= n; ++i)
    p = p * x;
  return (p);
}</pre>
		</blockquote>
		<p>Все функции имеют одинаковый вид:</p>
		<blockquote><pre>имя (список аргументов, если они имеются)
описание аргументов, если они имеются
{
  описания
  операторы
}</pre></blockquote>

<p>Эти функции могут быть записаны в любом порядке и находиться в одном или двух исходных файлах. Конечно, если исходная программа размещается в двух файлах, вам придется дать больше указаний при компиляции и загрузке, чем если бы она находилась в одном, но это дело операционной системы, а не атрибут языка. В данный момент, для того чтобы все полученные сведения о прогоне C-программ, не изменились в дальнейшем, мы будем предполагать, что обе функции находятся в одном и том же файле.</p>
		<p>Функция power вызывается дважды в строке</p>
		<blockquote>
			<pre>printf(&quot;%d %d %d\n&quot;, i, power(2,i), power(-3,i));</pre>
		</blockquote>
		<p>при каждом обращении функция power, получив два аргумента, возвращает целое значение, которое печатается в заданном формате. В выражениях power(2,i) является точно таким же целым, как 2 и i. (Не все функции выдают целое значение; мы займемся этим вопросом в <a href="../chapter4/4.html">главе&nbsp;4</a>).</p>
		<p>Аргументы функции power должны быть описаны соответствующим образом, так как их типы известны. Это сделано в строке</p>
		<blockquote>
			<pre>int x, n;</pre>
		</blockquote>
		<p>которая следует за именем функции.</p>
		<p>Описания аргументов помещаются между списком аргументов и открывающейся левой фигурной скобкой; каждое описание заканчивается точкой с запятой. Имена, использованные для аргументов функции power, являются чисто локальными и недоступны никаким другим функциям: другие процедуры могут использовать те же самые имена без возникновения конфликта. Это верно и для переменных i и p; i в функции power никак не связано с i в функции main.</p>
		<p>Значение, вычисленное функцией power, передаются в main с помощью оператора return, точно такого же, как в PL/1. внутри круглых скобок можно написать любое выражение. Функция не обязана возвращать какое-либо значение; оператор return, не содержащий никакого выражения, приводит к такой же передаче управления, как "сваливание на конец" функции при достижении конечной правой фигурной скобки, но при этом в вызывающую функцию не возвращается никакого полезного значения.</p>
		<div class="exercise">
			<p><span class="exercisetitle">Упражнение  1-13</span></p>
			<p>Напишите программу преобразования прописных букв из файла ввода в строчные, используя при этом функцию ower(c), которая возвращает значение c, если c - не буква, и значение соответствующей строчной буквы, если c - буква.</p>
		</div>
		<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>