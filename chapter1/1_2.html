<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

        <head>
                <meta http-equiv="content-type" content="text/html;charset=windows-1251">
                <meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
                <title>1.2 Переменные и арифметика</title>
                <link href="../style.css" rel="stylesheet" type="text/css" media="all">
        </head>

        <body>
                <script  language=JavaScript  src="../header.js"></script>
                <p>Следующая программа печатает приведенную ниже таблицу температур по Фаренгейту и их эквивалентов по стоградусной шкале Цельсия, используя для перевода формулу °C = (5 / 9) * (°F - 32):</p>

                <blockquote><table class="intext" width="122" border="0" cellspacing="1" cellpadding="0">
                        <tr>
                                <td class="cellcaption">
					<div align="center">
						Фаренгейт</div>
				</td>
                                <td class="cellcaption">
					<div align="center">
						Цельсий</div>
				</td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                0</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        -17.8</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        20</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        -6.7</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        40</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        4.4</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        60</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        15.6</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        ...</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        ...</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        260</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        126.7</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        280</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        137.8</div>
                                </td>
                        </tr>
                        <tr>
                                <td class="cellvalue">
                                        <div align="right">
                                                        300</div>
                                </td>
                                <td class="cellvalue">
                                        <div align="right">
                                                        140.9</div>
                                </td>
                        </tr>
                </table></blockquote>
		<p>Теперь сама программа:</p>
		<blockquote>
			<pre class="cpp">/* print fahrenheit-celsius table
   for f = 0, 20, ..., 300 */
main()
{
  int lower, upper, step;
  float fahr, celsius;
  lower = 0;  /* lower limit of temperature table */
  upper =300; /* upper limit */
  step  = 20; /* step size */
  fahr = lower;
  while (fahr &lt;= upper) {
    celsius = (5.0/9.0) * (fahr -32.0);
    printf("%4.0f %6.1f\n", fahr, celsius);
    fahr = fahr + step;
  }
}</pre>
		</blockquote>
		<p>Первые две строки</p>
		<blockquote><pre>/* print fahrenheit-celsius table
   for  f = 0, 20, ..., 300 */</pre></blockquote>
                <p>являются комментарием, который в данном случае кратко поясняет, что делает программа. Любые символы между /* и */ игнорируются компилятором; можно свободно пользоваться комментариями для облегчения понимания программы. Комментарии могут появляться в любом месте, где возможен пробел или переход на новую строку.</p>
                <p>В языке C все переменные должны быть описаны до их использования, обычно это делается в начале функции до первого выполняемого оператора. Если вы забудете вставить описание, то получите диагностическое сообщение от компилятора. Описание состоит из типа и списка переменных, имеющих этот тип, как в</p>
                <blockquote><pre>int lower, upper, step;
float fahr, celsius;</pre></blockquote>
                <p>Тип int означает, что все переменные списка целые; тип float предназначен для чисел с плавающей точкой, т.е. для чисел, которые могут иметь дробную часть. Точность как int, так и float зависит от конкретной машины, на которой вы работаете. На PDP-11, например, тип int соответствует 16-битовому числу со знаком, т.е. числу, лежащему между -32768 и +32767. Число типа float - это 32-битовое число, имеющее около семи значащих цифр и лежащее в диапазоне от 10е-38 до 10е+38. В <a href="../chapter2/2.html">главе&nbsp;2</a> приводится список размеров для других машин.</p>
                <p>В языке C предусмотрено несколько других основных типов данных, кроме int и float:</p>
                <blockquote><table class="intext" width="254" border="0" cellspacing="1" cellpadding="0">
                        <tr>
                                <td class="cellcaption"><code><b>char</b></code></td>
                                <td class="celltext" nowrap>символ - один байт</td>
                        </tr>
                        <tr>
                                <td class="cellcaption"><code><b>short</b></code></td>
                                <td class="celltext" nowrap>короткое целое</td>
                        </tr>
                        <tr>
                                <td class="cellcaption"><code><b>long</b></code></td>
                                <td class="celltext" nowrap>длинное целое</td>
                        </tr>
                        <tr>
                                <td class="cellcaption"><code><b>double</b></code></td>
                                <td class="celltext" nowrap>плавающее с двойной точностью</td>
                        </tr>
                </table></blockquote>
                <p>Размеры этих объектов тоже машинно-независимы; детали приведены в <a href="../chapter2/2.html">главе&nbsp;2</a>. Имеются также массивы, структуры и объединения этих основных типов, указатели на них и функции, которые их возвращают; со всеми ними мы встретимся в свое время.</p>
                <p>Фактически вычисления в программе перевода температур начинаются с операторов присваивания</p>
                <blockquote><pre>lower = 0;
upper =300;
step = 20;
fahr =lower;</pre></blockquote>
                <p>которые придают переменным их начальные значения, каждый отдельный оператор заканчивается точкой с запятой.</p>
                <p>Каждая строка таблицы вычисляется одинаковым образом, так что мы используем цикл, повторяющийся один раз на строку. В этом назначение оператора while:</p>
                <blockquote><pre>while (fahr &lt;= upper) {
  ....
}</pre></blockquote>
                <p>проверяется условие в круглых скобках. Если оно истинно (fahr меньше или равно upper), то выполняется тело цикла (все операторы, заключенные в фигурные скобки { и }). Затем вновь проверяется это условие и, если оно истинно, опять выполняется тело цикла. Если же условие не выполняется (fahr превосходит upper), цикл заканчивается и происходит переход к выполнению оператора, следующего за оператором цикла. Так как в настоящей программе нет никаких последующих операторов, то выполнение программы завершается.</p>
                <p>Тело оператора while может состоять из одного или более операторов, заключенных в фигурные скобки, как в программе перевода температур, или из одного оператора без скобок, как, например, в</p>
                <blockquote><pre>while (i &lt; j)
  i = 2 * i;</pre></blockquote>
		<p>В обоих случаях операторы, управляемые оператором while, сдвинуты на одну табуляцию, чтобы вы могли с первого взгляда видеть, какие операторы находятся внутри цикла. Такой сдвиг подчеркивает логическую структуру программы. Хотя в языке C допускается совершенно произвольное расположение операторов в строке, подходящий сдвиг и использование пробелов значительно облегчают чтение программ. Мы рекомендуем писать только один оператор на строке и (обычно) оставлять пробелы вокруг операторов. Расположение фигурных скобок менее существенно; мы выбрали один из нескольких популярных стилей. Выберите подходящий для вас стиль и затем используйте его последовательно.</p>
		<p>Основная часть работы выполняется в теле цикла. Температура по Цельсию вычисляется и присваивается переменной celsius оператором</p>
		<blockquote>
			<pre>celsius = (5.0/9.0) * (fahr-32.0);</pre></blockquote>
		<p>причина использования выражения 5.0/9.0 вместо выглядящего проще 5/9 заключается в том, что в языке C, как и во многих других языках, при делении целых происходит усечение, состоящее в отбрасывании дробной части результата. Таким образом, результат операции 5/9 равен нулю, и, конечно, в этом случае все температуры оказались бы равными нулю. Десятичная точка в константе указывает, что она имеет тип с плавающей точкой, так что, как мы и хотели, 5.0/9.0 равно 0.5555...</p>
                <p>Мы также писали 32.0 вместо 32, несмотря на то, что так как переменная fahr имеет тип float, целое 32 автоматически бы преобразовалось к типу float (в 32.0) перед вычитанием. С точки зрения стиля разумно писать плавающие константы с явной десятичной точкой даже тогда, когда они имеют целые значения; это подчеркивает их плавающую природу для просматривающего программу и обеспечивает то, что компилятор будет смотреть на вещи так же, как и Вы.</p>
                <p>Подробные правила о том, в каком случае целые преобразуются к типу с плавающей точкой, приведены в <a href="../chapter2/2.html">главе 2</a>. Сейчас же отметим, что присваивание</p>
                <blockquote><pre>fahr = lower;</pre></blockquote>
                <p>проверка</p>
                <blockquote><pre>while (fahr &lt;= upper)</pre></blockquote>
                <p>работают, как ожидается, - перед выполнением операций целые преобразуются в плавающую форму.</p>
                <p>Этот же пример сообщает чуть больше о том, как работает printf. Функция printf фактически является универсальной функцией форматных преобразований, которая будет полностью описана в <a href="../chapter7/7.html">главе 7</a>. Ее первым аргументом является строка символов, которая должна быть напечатана, причем каждый знак % указывает, куда должен подставляться каждый из остальных аргументов /второй, третий, .../ и в какой форме он должен печататься. Например, в операторе</p>
                <blockquote><pre>printf("%4.0f %6.1f\n", fahr, celsius);</pre></blockquote>
                <p>спецификация преобразования %4.0f говорит, что число с плавающей точкой должно быть напечатано в поле шириной по крайней мере в четыре символа без цифр после десятичной точки. Спецификация %6.1f описывает другое число, которое должно занимать по крайней мере шесть позиций с одной цифрой после десятичной точки, аналогично спецификациям F6.1 в фортране или F(6,1) в PL/1. Различные части спецификации могут быть опущены: спецификация %6f говорит, что число будет шириной по крайней мере в шесть символов; спецификация %2 требует двух позиций после десятичной точки, но ширина при этом не ограничивается; спецификация %f говорит только о том, что нужно напечатать число с плавающей точкой. Функция printf также распознает следующие спецификации: %d - для десятичного целого, %о - для восьмеричного числа, %х - для шестнадцатеричного, %с - для символа, %s - для символьной строки и %% - для самого символа %.</p>
                <p>Каждая конструкция с символом % в первом аргументе функции printf сочетается с соответствующим вторым, третьим, и т.д. аргументами; они должны согласовываться по числу и типу; в противном случае вы получите бессмысленные результаты.</p>
                <p>Между прочим, функция printf не является частью языка C; в самом языке C не определены операции ввода-вывода. Нет ничего таинственного и в функции printf; это - просто полезная функция, являющаяся частью стандартной библиотеки подпрограмм, которая обычно доступна C-программам. Чтобы сосредоточиться на самом языке, мы не будем подробно останавливаться на операциях ввода-вывода до <a href="../chapter7/7.html">главы&nbsp;7</a>. В частности, мы до тех пор отложим форматный ввод. Если вам надо ввести числа - прочитайте описание функции scanf в главе 7, <a href="../chapter7/7_4.html">раздел&nbsp;7.4</a>. Функция scanf во многом сходна с printf , но она считывает входные данные, а не печатает выходные.</p>
                <div class="exercise">
                        <p class="exercisetitle">Упражнение  1-3</p>
                        <p>Преобразуйте программу перевода температур таким образом, чтобы она печатала заголовок к таблице.</p>
                        <p class="exercisetitle">Упражнение  1-4</p>
                        <p>Напишите программы печати соответствующей таблицы перехода от градусов Цельсия к градусам Фаренгейта.</p>
                </div>
                <script  language=JavaScript  src="../footer.js"></script>
        </body>

</html>
