<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>1.5.3 Подсчет символов</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
		<p>Следующая программа подсчитывает число символов; она представляет собой небольшое развитие программы копирования.</p>
		<blockquote>
			<pre class="cpp">main()  /* count characters in input */
{
  long nc;
  nc = 0;
  while (getchar() != EOF )
    ++nc;
  printf("%ld\n", nc);
}</pre>
		</blockquote>
		<p>Оператор</p>
		<blockquote>
			<pre>++nc;</pre>
		</blockquote>
		<p>демонстрирует новую операцию, <code>++</code>, которая означает увеличение на единицу. Вы могли бы написать <code>nc = nc + 1</code>, но ++nc более кратко и зачастую более эффективно. Имеется соответствующая операция <code>--</code> уменьшение на единицу. Операции ++ и -- могут быть либо префиксными (++nc), либо постфиксными (nc++); эти две формы, как будет показано в главе 2, имеют в выражениях различные значения, но как ++nc, так и nc++ увеличивают nc. Пока мы будем придерживаться префиксных операций.</p>
		<p>Программа подсчета символов накапливает их количество в переменной типа long, а не int . На PDP-11 максимальное значение равно 32767, и если описать счетчик как int , то он будет переполняться даже при сравнительно малом файле ввода. На языке C для HONEYWELL и IBM типы long и int являются синонимами и имеют значительно больший размер. Спецификация преобразования %ld указывает printf , что соответствующий аргумент является целым типа long.</p>
		<p>Чтобы справиться с еще большими числами, вы можете использовать тип double (float двойной длины). Мы также используем оператор for вместо while с тем, чтобы проиллюстрировать другой способ записи цикла.</p>
		<blockquote>
			<pre class="cpp">main()  /* count characters in input */
{
  double  nc;
  for (nc = 0; getchar() != EOF; ++nc)
  ;
  printf("%.0f\n", nc);
}</pre>
		</blockquote>
		<p>Функция printf использует спецификацию %f как для float, так и для double; спецификация %.0f подавляет печать несуществующей дробной части.</p>
		<p>Тело оператора цикла for здесь пусто, так как вся работа выполняется в проверочной и реинициализационной частях. Но грамматические правила языка C требуют, чтобы оператор for имел тело. Изолированная точка с запятой, соответствующая пустому оператору, появляется здесь, чтобы удовлетворить этому требованию. Мы выделили ее на отдельную строку, чтобы сделать ее более заметной.</p>
<p>Прежде чем мы распростимся с программой подсчета символов, отметим, что если файл ввода не содержит никаких символов, то условие в while или for не выполнится при самом первом обращении к getchar , и, следовательно, программа выдаст нуль, т.е. правильный ответ. Это важное замечание. Одним из приятных свойств операторов while и for является то, что они проверяют условие в начале цикла, т.е. до выполнения тела. Если делать ничего не надо, то ничего не будет сделано, даже если это означает, что тело цикла никогда не будет выполняться. Программы должны действовать разумно, когда они обращаются с файлами типа "никаких символов". Операторы while и for помогают обеспечить правильное поведение программ при граничных значениях проверяемых условий.</p>

	<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>