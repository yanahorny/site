<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=windows-1251">
		<meta name="Description" content="K&R, 1st ed., 1978. Russian translation by <unknown>; chm-compiling by Sim&C, Belarus`2006">
   		<title>1.5.5 Подсчет слов</title>
		<link href="../style.css" rel="stylesheet" type="text/css" media="all">
	</head>

	<body>
	<script  language=JavaScript  src="../header.js"></script>
		<p>Четвертая программа из нашей серии полезных программ подсчитывает количество строк, слов и символов, используя при этом весьма широкое определение, что словом является любая последовательность символов, не содержащая пробелов, табуляций или новых строк. (Это - упрощенная версия утилиты wc системы UNIX).</p>
		<blockquote>
			<pre class="cpp">#define YES  1
#define NO   0

main()  /* count lines, words, chars in input */
{
  int c, nl, nw, inword;
  inword = no;
  nl = nw = nc = 0;
  while((c = getchar()) != EOF)  {
    ++nc;
    if (c == '\n')
      ++nl;
    if (c==' ' || c=='\n' || c=='\t')
      inword = no;
    else if (inword == NO)  {
      inword = YES;
      ++nw;
    }
  }
  printf("%d %d %d\n", nl, nw, nc);
}</pre>
		</blockquote>
		<p>Каждый раз, когда программа встречает первый символ слова, она увеличивает счетчик числа слов на единицу. Переменная inword следит за тем, находится ли программа в настоящий момент внутри слова или нет; сначала этой переменной присваивается "не в слове", чему соответствует значение NO. Мы предпочитаем символические константы YES и NO литерным значениям 1 и 0, потому что они делают программу более удобной для чтения. Конечно, в такой крошечной программе, как эта, это не приводит к заметной разнице, но в больших программах увеличение ясности вполне стоит тех скромных дополнительных усилий, которых требует следование этому принципу с самого начала. Вы также обнаружите, что существенные изменения гораздо легче вносить в те программы, где числа фигурируют только в качестве символьных констант.</p>
		<p>Строка</p>
		<blockquote>
			<pre>nl = nw = nc = 0;</pre>
		</blockquote>
		<p>полагает все три переменные равными нулю. Это не особый случай, а следствие того обстоятельства, что оператору присваивания соответствует некоторое значение и присваивания проводятся последовательно справа налево. Таким образом, дело обстоит так, как если бы мы написали</p>
		<blockquote>
			<pre>nc = (nl = (nw = 0));</pre>
		</blockquote>
		<p>Операция || означает ИЛИ (OR), так что строка</p>
		<blockquote>
			<pre>if( c==' ' || c=='\n' || c=='\t')</pre>
		</blockquote>
		<p>говорит "если с - пробел, или с - символ новой строки, или с - табуляция ..." (условная последовательность \t является изображением символа табуляции).</p>
		<p>Имеется соответствующая операция &amp;&amp; для И (AND). Выражения, связанные операциями &amp;&amp; или ||, рассматриваются слева на право, и при этом гарантируется, что оценивание выражений будет прекращено, как только станет ясно, является ли все выражение истинным или ложным. Так, если c оказывается пробелом, то нет никакой необходимости проверять, является ли c символом новой строки или табуляции, и такие проверки действительно не делаются. В данном случае это не имеет принципиального значения, но, как мы скоро увидим, в более сложных ситуациях эта особенность языка весьма существенна.</p>
<p>Этот пример также демонстрирует оператор else языка C, который указывает то действие, которое должно выполняться, если условие, содержащееся в операторе if, окажется ложным.</p>
<p>Общая форма такова:</p>

<blockquote><pre>if (выражение)
  оператор-1
else
  оператор-2</pre></blockquote>
		<p>Выполняется один и только один из двух операторов, связанных с конструкцией if-else. Если выражение истинно, выполняется оператор-1; если нет - выполняется оператор-2. Фактически каждый оператор может быть довольно сложным. В программе подсчета слов оператор, следующий за else, является оператором if, который управляет двумя операторами в фигурных скобках.</p>
		<div class="exercise">
			<p><span class="exercisetitle">Упражнение  1-9</span></p>
			<p>Как бы вы стали проверять программу подсчета слов? Какие имеются ограничения?</p>
			<p><span class="exercisetitle">Упражнение 1-10</span></p>
			<p>Напишите программу, которая будет печатать слова из файла ввода, причем по одному на строку.</p>
			<p><span class="exercisetitle">Упражнение 1-11</span></p>
			<p>Переделайте программу подсчета слов, используя лучшее определение &quot;слова&quot;; считайте, например словом последовательность букв, цифр и апострофов, начинающуюся с буквы.</p>
		</div>
		<script  language=JavaScript  src="../footer.js"></script>
	</body>
	
</html>